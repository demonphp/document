# 公共参数

## 说明
公共参数为次请求都必须带过来的参数

### 请求参数
| 参数名 | 类型 | 必填 | 描述 | 默认值 |
| --- | :---: | :---: | --- | --- |
| gid | string | 是 | 游戏id | 137 |
| ctype | string | 是 | 渠道类型 | own |
| ver | string | 是 | 版本号 | 1.0.0 |
| type | string | 是 | 客户端类型 ios | ios |
| devidfa | string | 是 | 客户端idfa | － |
| devidfv | string | 是 | 客户端idfv | － |
| phone_ip | string | 手机ip | 版本号 | 127.0.0.1 |
| phone_model | string | 是 | 手机型号 | iPhone7,2 |
| nname | string | 是 | 网络名称 | nrt64 |
| ntype | string | 是 | 网络类型 | 4g网络 |
| appid | appid | 是 | AppStore id  | 唯一的 |
| jsondata | string | 是 | 复合字段 | - |
| sign | string | 是 | 签名 | b4990b46989a274bb6c21ab688d01bb3 |

### 加解密算法
| 参数名 | 类型 | 必填 | 描述 | 示例值 |
| --- | :---: | :---: | --- | --- |
| 所有数据jsonencode | string | 是 | - | - |
| 算法 | string | 是 | AES128位,CBC加密 | aes-128-cbc |
| key | string | 是 | 加密key,16位 | 1234567890123456 |
| iv | string | 是 | 加密向量,16位 | 1234567890123456 |

```php
function m_encrypt($string = '', $key = '1234567890123456',$iv='1234567890123456')
{
    $str_padded = $string;
    if (strlen($str_padded) % 16) {
        $str_padded = str_pad($str_padded,strlen($str_padded) + 16 - strlen($str_padded) % 16, "\0");
    }

    $encrypted = openssl_encrypt($str_padded, 'aes-128-cbc', $key, OPENSSL_NO_PADDING , $iv);
    $str = base64_encode($encrypted);
    return $str;
}

function m_decrypt($string = '', $key = '1234567890123456',$iv='1234567890123456')
{
    $decrypted =openssl_decrypt( base64_decode($string) , 'aes-128-cbc', $key, OPENSSL_NO_PADDING, $iv);
    return rtrim( rtrim( $decrypted,chr(0) ), chr(7) );
}
```


### 加密公共请求参数
| 参数名 | 类型 | 必填 | 描述 | 示例值 |
| --- | :---: | :---: | --- | --- |
| requestdata | string | 是 | 所有参数加密成一个字段 | b5S8Q3wTzfZs7ZZVwu64lcbieCFzdsFQ1Km7vGheA+BFtgJ8thk0QSUs1iL91XVU1BBKGIk0VHi7gZx8DgYMALypUHJg1cpZRdANnNQS5GJN7kk2X8Uhxi7zZIAXLcsf6zs0CKZ2MvYC7VpfLirpl/WqBhrWka2ItMjy1HvHRiDjeeXwDDZqjlrVJCSWpI+z+9G+C5HMndJtS7MWuJRa72mgjWBtgKc7g50vha+gQ5bzPTMYojIRbLi39I9gOe4NCcTpk9vTQ0QYDngzEd4PSaDt00ie7WlOblLq5JXk6MEE4SVyPNPpfGL8ykW6piC0YI9VHJ2GH4W+DVoDagJWhVC7FknC4K8XrTUH/KmQuk8cUv5eTlnzJ5cOyFCavrbu7TI2V1MVmo+x996I7fRELyOEvNzErCLD9D88se6Rzws= |

### 加密公共返回JSON示例
```javascript
{
    "backdata": "jrE7EenRA2ghuPBS3FcC4uiPFyBcVzwfeLJCv5oEUsIr1AQu5y9oeNw1aht52EsPt9/WTV0nYe5c/wGCSlemoRU4a87EzhEihPkogA1mlwWsn8q98A1nPt2G5FChUKDdzC9UUsAojfJJjDZO0Ug9kTTP114FdgqWLgIjBpbWC216nvVyVFVEbuC+5xuvWfZd7MjNHVeiyN760j5rTuzsYtn8H5WPtrC2wIkMPeU+YS04NvvG/b1BWF0MtlAOfGYN2MS/xFPxq5r0XLyaY3yymaY7Q/8Avrq3/cwUzbAg7OhhUJa5m8NWHY2jU9FQvZz0MM76jJEXfhsDKJ7in+M/fyNUHNc6e5m9QONpNO82n5mrPE+YpE5RvU1URdKusqVjy+mMwxPN1gEEs4IuBoHKRkYrhRO3xZkD9B1ARLVA9peQBs5t+I2K4hEAmC3D3Oyw6Eyx/Wq8v6LLc132cud4QMV/JoPmCPSwAi+cA+uPYImuvwKKo/w+Kz8ZObPdT7TApYxxCEV0mQ7mosIlF34qU+U5pp1Il1/wGsFVZRKuaJBGumiHHn5tbklYSmXb2PxaR3rVzkfFcv3fyPTN6PWkWoXI3rPiPM2UOkY51RWHLGqJGZEK7w+8BqfWgFx8hk2rl2L/RNXE99t6JdKKYwbjT/LX90E0LD45+S5DEV3zSd4="          //返回相同的加密后的字符串信息数据
}
```


### 加解密参考文档

http://www.heylc.com/fuanyuopenssl.html

https://www.jianshu.com/p/fc2907601ca2
